name: update-flake-lock
on:
  workflow_dispatch:
    schedule:
      - cron: '10 0 * * *' # runs daily at 00:10

  jobs:
    lockfile:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout repository
          uses: actions/checkout@v4
        - name: Install Nix
          uses: DeterminateSystems/nix-installer-action@main
        - name: Update flake.lock
          uses: DeterminateSystems/update-flake-lock@main
          with:
            pr-title: "Chore: Update flake.lock"
            pr-labels: |
              dependencies
              automated
